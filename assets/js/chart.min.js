/*! UMRUM - v0.0.0 - 2013-11-14
* Copyright (c) 2013 ; Licensed  */
var Chart=function(a,b){function c(a,b,c,d){r.tooltips.push(new t(a,b,c,d))}function d(a){for(var b=0,c=0;a;)b+=a.offsetLeft+a.clientLeft,c+=a.offsetTop+a.clientTop,a=a.offsetParent;return window.pageXOffset>0||window.pageYOffset>0?(b-=window.pageXOffset,c-=window.pageYOffset):(document.body.scrollLeft>0||document.body.scrollTop>0)&&(b-=document.body.scrollLeft,c-=document.body.scrollTop),{x:b,y:c}}function e(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=m(e/d,1,0);return c*b.steps*f}function f(a,b,c,d){function e(){var e=a.animation?m(h(i),null,0):1;w(d),a.scaleOverlay?(c(e),b()):(b(),c(e))}function f(){i+=g,e(),1>=i?D(f):"function"==typeof a.onAnimationComplete&&a.onAnimationComplete()}var g=a.animation?1/m(a.animationSteps,Number.MAX_VALUE,1):1,h=s[a.animationEasing],i=a.animation?0:1;"function"!=typeof b&&(b=function(){}),D(f)}function g(a,b,c,d,e,f){function g(a){return Math.floor(Math.log(a)/Math.LN10)}var i,j,k,l,m,n,o;for(n=d-e,o=g(n),i=Math.floor(e/(1*Math.pow(10,o)))*Math.pow(10,o),j=Math.ceil(d/(1*Math.pow(10,o)))*Math.pow(10,o),k=j-i,l=Math.pow(10,o),m=Math.round(k/l);c>m||m>b;)c>m?(l/=2,m=Math.round(k/l)):(l*=2,m=Math.round(k/l));var p=[];return h(f,p,m,i,l),{steps:m,stepValue:l,graphMin:i,labels:p}}function h(a,b,c,d,e){if(a)for(var f=1;c+1>f;f++)b.push(p(a,{value:(d+e*f).toFixed(n(e))}))}function i(a){return Math.max.apply(Math,a)}function j(a){return Math.min.apply(Math,a)}function k(a,b){return a?a:b}function l(a){return!isNaN(parseFloat(a))&&isFinite(a)}function m(a,b,c){return l(b)&&a>b?b:l(c)&&c>a?c:a}function n(a){return a%1!=0?a.toString().split(".")[1].length:0}function o(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]="object"==typeof b[d]&&a[d]?o(a[d],b[d]):b[d];return c}function p(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):E[a]=E[a]||p(document.getElementById(a).innerHTML);return b?c(b):c}function q(a,b,c){var d,e,f=document.createElement("div");f.style.color=b,document.body.appendChild(f),d=window.getComputedStyle(f).color,f.style.color=c,e=window.getComputedStyle(f).color;var g=/rgb *\( *([0-9]{1,3}) *, *([0-9]{1,3}) *, *([0-9]{1,3}) *\)/,h=g.exec(d),i=g.exec(e),j=Math.round(parseFloat(h[1])),k=Math.round(parseFloat(h[2])),l=Math.round(parseFloat(h[3])),m=Math.round(parseFloat(i[1])),n=Math.round(parseFloat(i[2])),o=Math.round(parseFloat(i[3])),p=parseInt((j-m)*a+m),q=parseInt((k-n)*a+n),r=parseInt((l-o)*a+o);return f.parentNode.removeChild(f),"rgb("+p+","+q+","+r+")"}var r=this,s={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(1==(a/=1))return 1;if(c||(c=.3),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;if(0==a)return 0;if(2==(a/=.5))return 1;if(c||(c=.3*1.5),d<Math.abs(1)){d=1;var b=c/4}else var b=c/(2*Math.PI)*Math.asin(1/d);return 1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)*.5+1},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-s.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*s.easeInBounce(2*a):.5*s.easeOutBounce(2*a-1)+.5}};this.tooltips=[],tooltipDefaults={background:"rgba(0,0,0,0.6)",fontFamily:"'Arial'",fontStyle:"normal",fontColor:"white",fontSize:"13px",labelTemplate:"<%=label%>: <%=value%>",padding:{top:10,right:10,bottom:10,left:10},offset:{left:0,top:0},border:{width:0,color:"#000"},showHighlight:!0,highlight:{stroke:{width:1,color:"rgba(230,230,230,0.25)"},fill:"rgba(255,255,255,0.25)"}},b=b?o(tooltipDefaults,b):tooltipDefaults;var t=function(a,c,d){this.ctx=a,this.areaObj=c,this.data=d,this.savedState=null,this.highlightState=null,this.x=null,this.y=null,this.inRange=function(a,b){if(this.areaObj.type)switch(this.areaObj.type){case"rect":return a>=this.areaObj.x&&a<=this.areaObj.x+this.areaObj.width&&b>=this.areaObj.y&&b<=this.areaObj.y+this.areaObj.height;case"circle":return Math.pow(a-this.areaObj.x,2)+Math.pow(b-this.areaObj.y,2)<Math.pow(this.areaObj.r,2);case"shape":for(var c=this.areaObj.points,d=!1,e=-1,f=c.length,g=f-1;++e<f;g=e)(c[e].y<=b&&b<c[g].y||c[g].y<=b&&b<c[e].y)&&a<(c[g].x-c[e].x)*(b-c[e].y)/(c[g].y-c[e].y)+c[e].x&&(d=!d);return d}},this.render=function(c,d){if(null==this.savedState&&(this.ctx.putImageData(r.savedState,0,0),this.savedState=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)),this.ctx.putImageData(this.savedState,0,0),b.showHighlight)if(null==this.highlightState){switch(this.ctx.strokeStyle=b.highlight.stroke.color,this.ctx.lineWidth=b.highlight.stroke.width,this.ctx.fillStyle=b.highlight.fill,this.areaObj.type){case"rect":this.ctx.strokeRect(this.areaObj.x,this.areaObj.y,this.areaObj.width,this.areaObj.height),this.ctx.fillStyle=b.highlight.fill,this.ctx.fillRect(this.areaObj.x,this.areaObj.y,this.areaObj.width,this.areaObj.height);break;case"circle":this.ctx.beginPath(),this.ctx.arc(this.areaObj.x,this.areaObj.y,this.areaObj.r,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.fill();break;case"shape":this.ctx.beginPath(),this.ctx.moveTo(this.areaObj.points[0].x,this.areaObj.points[0].y);for(var e in this.areaObj.points)this.ctx.lineTo(this.areaObj.points[e].x,this.areaObj.points[e].y);this.ctx.stroke(),this.ctx.fill()}this.highlightState=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}else this.ctx.putImageData(this.highlightState,0,0);var f=c+b.offset.left,g=d+b.offset.top,h=p(b.labelTemplate,this.data),i=b.padding.left+this.ctx.measureText(h).width+b.padding.right;f+i>a.canvas.width&&(f-=0>f-i?f:i),g+24>a.canvas.height&&(g-=24),this.ctx.fillStyle=b.background,this.ctx.fillRect(f,g,i,24),b.border.width>0&&(this.ctx.fillStyle=b.border.color,this.ctx.lineWidth=b.border.width,this.ctx.strokeRect(f,g,i,24)),this.ctx.font=b.fontStyle+" "+b.fontSize+" "+b.fontFamily,this.ctx.fillStyle=b.fontColor,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(h,f+i/2,g+12),this.x=c,this.y=d}},u=a.canvas.width,v=a.canvas.height;this.savedState=null,a.canvas.onmousemove=function(b){if(r.tooltips.length>0){r.savedState=null==r.savedState?a.getImageData(0,0,a.canvas.width,a.canvas.height):r.savedState;var c=0;for(var e in r.tooltips){var f=d(a.canvas),g=b.clientX-f.x,h=b.clientY-f.y;r.tooltips[e].inRange(g,h)&&(r.tooltips[e].render(g,h),c++)}0==c&&a.putImageData(r.savedState,0,0)}},a.canvas.onmouseout=function(){null!=r.savedState&&a.putImageData(r.savedState,0,0)},window.devicePixelRatio&&(a.canvas.style.width=u+"px",a.canvas.style.height=v+"px",a.canvas.height=v*window.devicePixelRatio,a.canvas.width=u*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(b,c){r.PolarArea.defaults={scaleOverlay:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,showTooltips:!0};var d=c?o(r.PolarArea.defaults,c):r.PolarArea.defaults;return new x(b,d,a)},this.Radar=function(b,c){r.Radar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,showTooltips:!0};var d=c?o(r.Radar.defaults,c):r.Radar.defaults;return new y(b,d,a)},this.Pie=function(b,c){r.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,labelFontFamily:"'Arial'",labelFontStyle:"normal",labelFontSize:12,labelFontColor:"#666",labelAlign:"right",showTooltips:!0};var d=c?o(r.Pie.defaults,c):r.Pie.defaults;return new z(b,d,a)},this.Doughnut=function(b,c){r.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,showTooltips:!0};var d=c?o(r.Doughnut.defaults,c):r.Doughnut.defaults;return new A(b,d,a)},this.Line=function(b,c){r.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,showTooltips:!0};var d=c?o(r.Line.defaults,c):r.Line.defaults;return new B(b,d,a)},this.Bar=function(b,c){r.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,showTooltips:!0};var d=c?o(r.Bar.defaults,c):r.Bar.defaults;return new C(b,d,a)};var w=function(a){a.clearRect(0,0,u,v)},x=function(a,b,d){function l(){p=j([u,v])/2,p-=i([.5*b.scaleFontSize,.5*b.scaleLineWidth]),s=2*b.scaleFontSize,b.scaleShowLabelBackdrop&&(s+=2*b.scaleBackdropPaddingY,p-=1.5*b.scaleBackdropPaddingY),t=p,s=k(s,5)}function m(){for(var a=0;a<r.steps;a++)if(b.scaleShowLine&&(d.beginPath(),d.arc(u/2,v/2,q*(a+1),0,2*Math.PI,!0),d.strokeStyle=b.scaleLineColor,d.lineWidth=b.scaleLineWidth,d.stroke()),b.scaleShowLabels){d.textAlign="center",d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily;var c=r.labels[a];if(b.scaleShowLabelBackdrop){var e=d.measureText(c).width;d.fillStyle=b.scaleBackdropColor,d.beginPath(),d.rect(Math.round(u/2-e/2-b.scaleBackdropPaddingX),Math.round(v/2-q*(a+1)-.5*b.scaleFontSize-b.scaleBackdropPaddingY),Math.round(e+2*b.scaleBackdropPaddingX),Math.round(b.scaleFontSize+2*b.scaleBackdropPaddingY)),d.fill()}d.textBaseline="middle",d.fillStyle=b.scaleFontColor,d.fillText(c,u/2,v/2-q*(a+1))}}function n(f){var g=-Math.PI/2,h=2*Math.PI/a.length,i=1,j=1;b.animation&&(b.animateScale&&(i=f),b.animateRotate&&(j=f));for(var k=0;k<a.length;k++){if(d.beginPath(),d.arc(u/2,v/2,i*e(a[k].value,r,q),g,g+j*h,!1),d.lineTo(u/2,v/2),d.closePath(),d.fillStyle=a[k].color,d.fill(),f>.9999999){var l=[{x:u/2,y:v/2}],m=50,n=e(a[k].value,r,q);l.push({x:u/2+n*Math.cos(g),y:v/2+n*Math.sin(g)});for(var o=0;m>=o;o++)l.push({x:u/2+n*Math.cos(g+o/m*j*h),y:v/2+n*Math.sin(g+o/m*j*h)});c(d,{type:"shape",points:l},{label:a[k].label,value:a[k].value},"PolarArea")}b.segmentShowStroke&&(d.strokeStyle=b.segmentStrokeColor,d.lineWidth=b.segmentStrokeWidth,d.stroke()),g+=j*h}}function o(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.length;d++)a[d].value>b&&(b=a[d].value),a[d].value<c&&(c=a[d].value);var e=Math.floor(t/(.66*s)),f=Math.floor(t/s*.5);return{maxValue:b,minValue:c,maxSteps:e,minSteps:f}}var p,q,r,s,t,w,x;l(),w=o(),x=b.scaleShowLabels?b.scaleLabel:null,b.scaleOverride?(r={steps:b.scaleSteps,stepValue:b.scaleStepWidth,graphMin:b.scaleStartValue,labels:[]},h(x,r.labels,r.steps,b.scaleStartValue,b.scaleStepWidth)):r=g(t,w.maxSteps,w.minSteps,w.maxValue,w.minValue,x),q=p/r.steps,f(b,m,n,d)},y=function(a,b,d){function l(f){var g=2*Math.PI/a.datasets[0].data.length;d.save(),d.translate(u/2,v/2);for(var h=0;h<a.datasets.length;h++){var i=e(a.datasets[h].data[0],s,r);if(d.beginPath(),d.moveTo(0,-1*f*i),1==f){{var j=u/2+i*Math.cos(0-Math.PI/2),k=v/2+i*Math.sin(0-Math.PI/2),l=b.pointDot?b.pointDotRadius+b.pointDotStrokeWidth:10;""!=a.labels[0].trim()?a.labels[0]+": "+a.datasets[h].data[0]:a.datasets[h].data[0]}c(d,{type:"circle",x:j,y:k,r:l},{label:a.labels[0],value:a.datasets[h].data[0]},"Radar")}for(var m=1;m<a.datasets[h].data.length;m++)if(i=e(a.datasets[h].data[m],s,r),d.rotate(g),d.lineTo(0,-1*f*i),1==f){{var j=u/2+i*Math.cos(m*g-Math.PI/2),k=v/2+i*Math.sin(m*g-Math.PI/2),l=b.pointDot?b.pointDotRadius+b.pointDotStrokeWidth:10;""!=a.labels[m].trim()?a.labels[m]+": "+a.datasets[h].data[m]:a.datasets[h].data[m]}c(d,{type:"circle",x:j,y:k,r:l},{label:a.labels[m],value:a.datasets[h].data[m]},"Radar")}if(d.closePath(),d.fillStyle=a.datasets[h].fillColor,d.strokeStyle=a.datasets[h].strokeColor,d.lineWidth=b.datasetStrokeWidth,d.fill(),d.stroke(),b.pointDot){d.fillStyle=a.datasets[h].pointColor,d.strokeStyle=a.datasets[h].pointStrokeColor,d.lineWidth=b.pointDotStrokeWidth;for(var n=0;n<a.datasets[h].data.length;n++)d.rotate(g),d.beginPath(),d.arc(0,-1*f*e(a.datasets[h].data[n],s,r),b.pointDotRadius,2*Math.PI,!1),d.fill(),d.stroke()}d.rotate(g)}d.restore()}function n(){var c=2*Math.PI/a.datasets[0].data.length;if(d.save(),d.translate(u/2,v/2),b.angleShowLineOut){d.strokeStyle=b.angleLineColor,d.lineWidth=b.angleLineWidth;for(var e=0;e<a.datasets[0].data.length;e++)d.rotate(c),d.beginPath(),d.moveTo(0,0),d.lineTo(0,-q),d.stroke()}for(var f=0;f<s.steps;f++){if(d.beginPath(),b.scaleShowLine){d.strokeStyle=b.scaleLineColor,d.lineWidth=b.scaleLineWidth,d.moveTo(0,-r*(f+1));for(var g=0;g<a.datasets[0].data.length;g++)d.rotate(c),d.lineTo(0,-r*(f+1));d.closePath(),d.stroke()}if(b.scaleShowLabels){if(d.textAlign="center",d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily,d.textBaseline="middle",b.scaleShowLabelBackdrop){var h=d.measureText(s.labels[f]).width;d.fillStyle=b.scaleBackdropColor,d.beginPath(),d.rect(Math.round(-h/2-b.scaleBackdropPaddingX),Math.round(-r*(f+1)-.5*b.scaleFontSize-b.scaleBackdropPaddingY),Math.round(h+2*b.scaleBackdropPaddingX),Math.round(b.scaleFontSize+2*b.scaleBackdropPaddingY)),d.fill()}d.fillStyle=b.scaleFontColor,d.fillText(s.labels[f],0,-r*(f+1))}}for(var i=0;i<a.labels.length;i++){d.font=b.pointLabelFontStyle+" "+b.pointLabelFontSize+"px "+b.pointLabelFontFamily,d.fillStyle=b.pointLabelFontColor;var j=Math.sin(c*i)*(q+b.pointLabelFontSize),k=Math.cos(c*i)*(q+b.pointLabelFontSize);d.textAlign=c*i==Math.PI||c*i==0?"center":c*i>Math.PI?"right":"left",d.textBaseline="middle",d.fillText(a.labels[i],j,-k)}d.restore()}function o(){q=j([u,v])/2,t=2*b.scaleFontSize;for(var c=0,e=0;e<a.labels.length;e++){d.font=b.pointLabelFontStyle+" "+b.pointLabelFontSize+"px "+b.pointLabelFontFamily;var f=d.measureText(a.labels[e]).width;f>c&&(c=f)}q-=i([c,b.pointLabelFontSize/2*1.5]),q-=b.pointLabelFontSize,q=m(q,null,0),w=q,t=k(t,5)}function p(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(w/(.66*t)),g=Math.floor(w/t*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var q,r,s,t,w,x,y;a.labels||(a.labels=[]),o();var x=p();y=b.scaleShowLabels?b.scaleLabel:null,b.scaleOverride?(s={steps:b.scaleSteps,stepValue:b.scaleStepWidth,graphMin:b.scaleStartValue,labels:[]},h(y,s.labels,s.steps,b.scaleStartValue,b.scaleStepWidth)):s=g(w,x.maxSteps,x.minSteps,x.maxValue,x.minValue,y),r=q/s.steps,f(b,n,l,d)},z=function(a,b,d){function e(e){function f(a,b){switch(a){case"left":return-b+20;case"center":return-b/2}return-10}function i(a){switch(a){case"left":return"right";case"right":return"left";case"center":return a}}var j=-Math.PI/2,k=1,l=1;b.animation&&(b.animateScale&&(k=e),b.animateRotate&&(l=e));for(var m=0;m<a.length;m++){var n=l*(a[m].value/g)*2*Math.PI;if(d.beginPath(),d.arc(u/2,v/2,k*h,j,j+n),d.lineTo(u/2,v/2),d.closePath(),d.fillStyle=a[m].color,d.fill(),a[m].label&&k*h*2*n/(2*Math.PI)>b.labelFontSize){var o=a[m].labelFontSize||b.labelFontSize+"px";null!=o.match(/^[0-9]+$/g)&&(o+="px"),d.font=b.labelFontStyle+" "+o+" "+b.labelFontFamily,d.fillStyle=q(e,a[m].labelColor||"black",a[m].color),d.textBaseline="middle";var p=-(j+n)+n/2,r=u/2+k*h*Math.cos(p),s=v/2-k*h*Math.sin(p);d.textAlign=a[m].labelAlign||b.labelAlign,textX=f(d.textAlign,k*h),p<-Math.PI/2&&(p-=Math.PI,d.textAlign=i(d.textAlign),textX=-textX),d.translate(r,s),d.rotate(-p),d.fillText(a[m].label,textX,0),d.rotate(p),d.translate(-r,-s)}if(e>.9999999){var t=[{x:u/2,y:v/2}],w=50;t.push({x:u/2+h*Math.cos(j),y:v/2+h*Math.sin(j)});for(var x=0;w>=x;x++)t.push({x:u/2+h*Math.cos(j+x/w*n),y:v/2+h*Math.sin(j+x/w*n)});c(d,{type:"shape",points:t},{label:a[m].label,value:a[m].value},"Pie")}b.segmentShowStroke&&(d.lineWidth=b.segmentStrokeWidth,d.strokeStyle=b.segmentStrokeColor,d.stroke()),j+=n}}for(var g=0,h=j([v/2,u/2])-5,i=0;i<a.length;i++)g+=a[i].value;d.fillStyle="black",d.textBaseline="base",f(b,null,e,d)},A=function(a,b,d){function e(e){var f=-Math.PI/2,j=1,k=1;b.animation&&(b.animateScale&&(j=e),b.animateRotate&&(k=e));for(var l=0;l<a.length;l++){var m=k*(a[l].value/g)*2*Math.PI;if(d.beginPath(),d.arc(u/2,v/2,j*h,f,f+m,!1),d.arc(u/2,v/2,j*i,f+m,f,!0),d.closePath(),d.fillStyle=a[l].color,d.fill(),e>.9999999){var n=[],o=50;n.push({x:u/2+h*Math.cos(f),y:v/2+h*Math.sin(f)});for(var p=0;o>=p;p++)n.push({x:u/2+h*Math.cos(f+p/o*m),y:v/2+h*Math.sin(f+p/o*m)});n.push({x:u/2+i*Math.cos(f+m),y:v/2+i*Math.sin(f+m)});for(var p=o;p>=0;p--)n.push({x:u/2+i*Math.cos(f+p/o*m),y:v/2+i*Math.sin(f+p/o*m)});c(d,{type:"shape",points:n},{label:a[l].label,value:a[l].value},"Doughnut")}b.segmentShowStroke&&(d.lineWidth=b.segmentStrokeWidth,d.strokeStyle=b.segmentStrokeColor,d.stroke()),f+=m}}for(var g=0,h=j([v/2,u/2])-5,i=h*(b.percentageInnerCutout/100),k=0;k<a.length;k++)g+=a[k].value;f(b,null,e,d)},B=function(a,b,d){function i(f){function g(b,c){return A-f*e(a.datasets[b].data[c],p,o)}function h(a){return z+w*a}for(var i=0;i<a.datasets.length;i++){d.strokeStyle=a.datasets[i].strokeColor,d.lineWidth=b.datasetStrokeWidth,d.beginPath(),d.moveTo(z,A-f*e(a.datasets[i].data[0],p,o));for(var j=1;j<a.datasets[i].data.length;j++)b.bezierCurve?d.bezierCurveTo(h(j-.5),g(i,j-1),h(j-.5),g(i,j),h(j),g(i,j)):d.lineTo(h(j),g(i,j));for(var k=b.pointDot?b.pointDotRadius+b.pointDotStrokeWidth:10,j=0;j<a.datasets[i].data.length;j++)1==f&&c(d,{type:"circle",x:h(j),y:g(i,j),r:k},{label:a.labels[j],value:a.datasets[i].data[j]},"Line");if(d.stroke(),b.datasetFill?(d.lineTo(z+w*(a.datasets[i].data.length-1),A),d.lineTo(z,A),d.closePath(),d.fillStyle=a.datasets[i].fillColor,d.fill()):d.closePath(),b.pointDot){d.fillStyle=a.datasets[i].pointColor,d.strokeStyle=a.datasets[i].pointStrokeColor,d.lineWidth=b.pointDotStrokeWidth;for(var l=0;l<a.datasets[i].data.length;l++)d.beginPath(),d.arc(z+w*l,A-f*e(a.datasets[i].data[l],p,o),b.pointDotRadius,0,2*Math.PI,!0),d.fill(),d.stroke()}}}function j(){d.lineWidth=b.scaleLineWidth,d.strokeStyle=b.scaleLineColor,d.beginPath(),d.moveTo(u-x/2+5,A),d.lineTo(u-x/2-y-5,A),d.stroke(),B>0?(d.save(),d.textAlign="right"):d.textAlign="center",d.fillStyle=b.scaleFontColor;for(var c=0;c<a.labels.length;c++)d.save(),B>0?(d.translate(z+c*w,A+b.scaleFontSize),d.rotate(-(B*(Math.PI/180))),d.fillText(a.labels[c],0,0),d.restore()):d.fillText(a.labels[c],z+c*w,A+b.scaleFontSize+3),d.beginPath(),d.moveTo(z+c*w,A+3),b.scaleShowGridLines&&c>0?(d.lineWidth=b.scaleGridLineWidth,d.strokeStyle=b.scaleGridLineColor,d.lineTo(z+c*w,5)):d.lineTo(z+c*w,A+3),d.stroke();d.lineWidth=b.scaleLineWidth,d.strokeStyle=b.scaleLineColor,d.beginPath(),d.moveTo(z,A+5),d.lineTo(z,5),d.stroke(),d.textAlign="right",d.textBaseline="middle";for(var e=0;e<p.steps;e++)d.beginPath(),d.moveTo(z-3,A-(e+1)*o),b.scaleShowGridLines?(d.lineWidth=b.scaleGridLineWidth,d.strokeStyle=b.scaleGridLineColor,d.lineTo(z+y+5,A-(e+1)*o)):d.lineTo(z-.5,A-(e+1)*o),d.stroke(),b.scaleShowLabels&&d.fillText(p.labels[e],z-8,A-(e+1)*o)}function k(){var c=1;if(b.scaleShowLabels){d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily;for(var e=0;e<p.labels.length;e++){var f=d.measureText(p.labels[e]).width;c=f>c?f:c}c+=10}y=u-c-x,w=Math.floor(y/(a.labels.length-1)),z=u-x/2-y,A=r+b.scaleFontSize/2}function l(){n=v,d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily,x=1;for(var c=0;c<a.labels.length;c++){var e=d.measureText(a.labels[c]).width;x=e>x?e:x}u/a.labels.length<x?(B=45,u/a.labels.length<Math.cos(B)*x?(B=90,n-=x):n-=Math.sin(B)*x):n-=b.scaleFontSize,n-=5,q=b.scaleFontSize,n-=q,r=n}function m(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(r/(.66*q)),g=Math.floor(r/q*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var n,o,p,q,r,s,t,w,x,y,z,A,B=0;l(),s=m(),t=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride?(p={steps:b.scaleSteps,stepValue:b.scaleStepWidth,graphMin:b.scaleStartValue,labels:[]},h(t,p.labels,p.steps,b.scaleStartValue,b.scaleStepWidth)):p=g(r,s.maxSteps,s.minSteps,s.maxValue,s.minValue,t),o=Math.floor(r/p.steps),k(),f(b,j,i,d)},C=function(a,b,d){function i(f){d.lineWidth=b.barStrokeWidth;for(var g=0;g<a.datasets.length;g++){d.fillStyle=a.datasets[g].fillColor,d.strokeStyle=a.datasets[g].strokeColor;for(var h=0;h<a.datasets[g].data.length;h++){var i=z+b.barValueSpacing+w*h+B*g+b.barDatasetSpacing*g+b.barStrokeWidth*g;if(d.beginPath(),d.moveTo(i,A),d.lineTo(i,A-f*e(a.datasets[g].data[h],p,o)+b.barStrokeWidth/2),d.lineTo(i+B,A-f*e(a.datasets[g].data[h],p,o)+b.barStrokeWidth/2),d.lineTo(i+B,A),b.barShowStroke&&d.stroke(),d.closePath(),d.fill(),1==f){var j=i,k=e(a.datasets[g].data[h],p,o),l=A-k,m=B;c(d,{type:"rect",x:j,y:l,width:m,height:k},{label:a.labels[h],value:a.datasets[g].data[h]},"Bar")}}}}function j(){d.lineWidth=b.scaleLineWidth,d.strokeStyle=b.scaleLineColor,d.beginPath(),d.moveTo(u-x/2+5,A),d.lineTo(u-x/2-y-5,A),d.stroke(),C>0?(d.save(),d.textAlign="right"):d.textAlign="center",d.fillStyle=b.scaleFontColor;for(var c=0;c<a.labels.length;c++)d.save(),C>0?(d.translate(z+c*w,A+b.scaleFontSize),d.rotate(-(C*(Math.PI/180))),d.fillText(a.labels[c],0,0),d.restore()):d.fillText(a.labels[c],z+c*w+w/2,A+b.scaleFontSize+3),d.beginPath(),d.moveTo(z+(c+1)*w,A+3),d.lineWidth=b.scaleGridLineWidth,d.strokeStyle=b.scaleGridLineColor,d.lineTo(z+(c+1)*w,5),d.stroke();d.lineWidth=b.scaleLineWidth,d.strokeStyle=b.scaleLineColor,d.beginPath(),d.moveTo(z,A+5),d.lineTo(z,5),d.stroke(),d.textAlign="right",d.textBaseline="middle";for(var e=0;e<p.steps;e++)d.beginPath(),d.moveTo(z-3,A-(e+1)*o),b.scaleShowGridLines?(d.lineWidth=b.scaleGridLineWidth,d.strokeStyle=b.scaleGridLineColor,d.lineTo(z+y+5,A-(e+1)*o)):d.lineTo(z-.5,A-(e+1)*o),d.stroke(),b.scaleShowLabels&&d.fillText(p.labels[e],z-8,A-(e+1)*o)}function k(){var c=1;if(b.scaleShowLabels){d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily;for(var e=0;e<p.labels.length;e++){var f=d.measureText(p.labels[e]).width;c=f>c?f:c}c+=10}y=u-c-x,w=Math.floor(y/a.labels.length),B=(w-2*b.scaleGridLineWidth-2*b.barValueSpacing-(b.barDatasetSpacing*a.datasets.length-1)-(b.barStrokeWidth/2*a.datasets.length-1))/a.datasets.length,z=u-x/2-y,A=r+b.scaleFontSize/2}function l(){n=v,d.font=b.scaleFontStyle+" "+b.scaleFontSize+"px "+b.scaleFontFamily,x=1;for(var c=0;c<a.labels.length;c++){var e=d.measureText(a.labels[c]).width;x=e>x?e:x}u/a.labels.length<x?(C=45,u/a.labels.length<Math.cos(C)*x?(C=90,n-=x):n-=Math.sin(C)*x):n-=b.scaleFontSize,n-=5,q=b.scaleFontSize,n-=q,r=n}function m(){for(var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<a.datasets.length;d++)for(var e=0;e<a.datasets[d].data.length;e++)a.datasets[d].data[e]>b&&(b=a.datasets[d].data[e]),a.datasets[d].data[e]<c&&(c=a.datasets[d].data[e]);var f=Math.floor(r/(.66*q)),g=Math.floor(r/q*.5);return{maxValue:b,minValue:c,maxSteps:f,minSteps:g}}var n,o,p,q,r,s,t,w,x,y,z,A,B,C=0;l(),s=m(),t=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride?(p={steps:b.scaleSteps,stepValue:b.scaleStepWidth,graphMin:b.scaleStartValue,labels:[]},h(t,p.labels,p.steps,b.scaleStartValue,b.scaleStepWidth)):p=g(r,s.maxSteps,s.minSteps,s.maxValue,s.minValue,t),o=Math.floor(r/p.steps),k(),f(b,j,i,d)},D=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),E={}};